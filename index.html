<!DOCTYPE html>
<html>
<head>
    <title>Bubble Tea Inquiry</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Seasoned Bubble Tea Owner Uncle Fabi Will Answer you Any Questions About Bubble Tea</h1>

    <h2>Ask a question (wait for the answer wth patience, Uncle Fabi is very busy...)</h2>
    <input type="text" id="messageInput" placeholder="Type your message">
    <button onclick="addMessage()">Send</button>

    <h2>Chat history</h2>
    <ul id="messageList"></ul>

    <script>
        // Function to add a message and update the chat history
        function addMessage() {
            const messageInput = document.getElementById("messageInput");
            const messageValue = messageInput.value; // Get the input value
            messageInput.value = ''; // Clear the input for new message
            const formData = new FormData();
            formData.append('message', messageValue);

            fetch('https://bubbletea.ericjiangshanyu.repl.co/userQuery', {
                method: 'POST',
                body: formData,
            })
            .then(response => response.json()) // Convert the response to JSON
            .then(data => {
                // Add the new message and bot response to the chat history
                const messageList = document.getElementById("messageList");
                const userMessageElement = document.createElement("li");
                userMessageElement.textContent = `You: ${messageValue}`;
                messageList.appendChild(userMessageElement);

                if(data && data.response) {
                    const botMessageElement = document.createElement("li");
                    botMessageElement.textContent = `Uncle Fabi: ${data.response}`;
                    messageList.appendChild(botMessageElement);
                }
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</html>
