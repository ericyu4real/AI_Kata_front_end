<!DOCTYPE html>
<html>
<head>
    <title>Message Board</title>
</head>
<body>
    <h1>Message Board</h1>

    <h2>Add a Message</h2>
    <input type="text" id="messageInput" placeholder="Type your message">
    <button onclick="addMessage()">Add Message</button>

    <h2>Latest Messages</h2>
    <ul id="messageList"></ul>

    <script>
        // Function to add a message by calling the 'add_message' API
        function addMessage() {
            const messageInput = document.getElementById("messageInput").value;
            const formData = new FormData();
            formData.append('message', messageInput);

            fetch('https://flask-demo-007-5eef34a1dbfe.herokuapp.com/add_message', {
                method: 'POST',
                body: formData,
            })
            .then(data => {
                // Refresh the page after adding the message
                location.reload(); // This will refresh the page
            })
            .catch(error => console.error('Error:', error));
        }

        // Function to retrieve and display messages by calling the 'get_messages' API
        function getMessages() {
            fetch('https://flask-demo-007-5eef34a1dbfe.herokuapp.com/messages', { method: 'GET' })
            .then(response => response.json())
            .then(data => {
                    const messageList = document.getElementById("messageList");
                    messageList.innerHTML = ''; // Clear previous messages

                    data.forEach(message => {
                        const li = document.createElement('li');
                        li.textContent = message;
                        messageList.appendChild(li);
                    });
                })
            .catch(error => console.error('Error:', error));
        }
        

        // Initially load messages
        getMessages();
    </script>
</body>
</html>
